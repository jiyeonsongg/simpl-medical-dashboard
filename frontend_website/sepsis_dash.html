<!DOCTYPE html>
<html>
<head>
    <title>Dashboard with Visualizations</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="https://public.tableau.com/javascripts/api/tableau.embedding.3.latest.min.js"></script>
</head>
<body class="flex flex-col min-h-screen m-0 font-sans">
    <header class="bg-gray-800 text-white text-center p-4 flex justify-between items-center">
        <a href="index.html" class="flex items-center"> <!-- Use flex and items-center to align items horizontally -->
            <img src="images/logo.png" alt="Logo" class="h-12"> <!-- Your logo image -->
            <span class="ml-3 text-xl font-bold">Sepsis Insight and Management Platform (SIMPL)</span> <!-- Your logo text right next to the image -->
        </a>
        <nav class="flex items-center">
            <ul class="list-none flex space-x-4">
                <li><a href="index.html" class="text-white hover:text-gray-300">Sepsis Risk</a></li>
                <li><a href="about_us.html" class="text-white hover:text-gray-300">About Us</a></li>
                <li><a href="report.html" class="text-white hover:text-gray-300">Report</a></li>
            </ul>
        </nav>
    </header>
    <div id="dashboard" class="flex flex-1 relative">
        <section id="main-content" class="flex-1 p-4 flex flex-col justify-center items-center">
            <div class="grid grid-cols-2 w-full h-full gap-4">
                <!-- Left side -->
                <div class="grid grid-cols-2 grid-rows-3 gap-4">
                    <div class="bg-white p-4 border border-gray-300 rounded-lg">
                        <h2 class="text-xl font-semibold mb-4 text-center">Patient Information</h2>
                        <div class="bg-blue-100 grid rounded-lg grid-cols-2 gap-4 mb-4 p-4">
                            <div id="subject_id_display"></div> <!-- Subject ID -->
                            <!-- <div id="subject_name_display"></div> Subject Name -->
                            <div id="subject_age_display"></div> <!-- Subject Age -->
                            <!-- <div><strong>Gender:</strong> None</div> -->
                        </div>
                        <p id="jit_time" class="mb-4 text-center">Just In Time Information</p>
                        <div class="bg-blue-100 grid rounded-lg grid-cols-2 gap-4 p-4">
                            <div id="hr_display"></div>
                            <div id="temp_display"></div>
                            <div id="rr_display"></div>
                            <div id="bp_display"></div>
                            <div id="spo2_display"></div>
                            <div id="sofa_display"></div>
                        </div>
                    </div>
                    <div class="bg-white p-4 border border-gray-300 rounded-lg">
                        <select id="visualSelector2">
                            <option value="visual3">Subgroups: Age</option>
                            <option value="visual4">Subgroups: Composition</option>
                            <!-- Add more options for additional visuals -->
                        </select>
                        <div id="visContainer2"><tableau-viz id="tableauViz" src='https://public.tableau.com/views/SepsisDashboardTableauWork/Dashboard1?:language=en-US&publish=yes&:sid=&:display_count=n&:origin=viz_share_link'>
                        </tableau-viz></div>
                    </div>
                    <div class="bg-white p-4 border border-gray-300 rounded-lg col-span-2 row-span-2">
                        <select id="visualSelector">
                            <option value="visual1">Procedure History</option>
                            <option value="visual2">Patient: General Vitals</option>
                            <option value="visual5">Patient: Frequent Vitals</option>
                            <!-- Add more options for additional visuals -->
                        </select>
                        <div id="visContainer"><tableau-viz id="tableauViz" src='https://public.tableau.com/views/ProcedureTimeline/Dashboard1?:language=en-US&publish=yes&:sid=&:display_count=n&:origin=viz_share_link'>
                        </tableau-viz></div>
                        <!-- <div id="d3VisualContainer"></div> Container for Visuals -->
                    </div>
                </div>
                
                <!-- Right side -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-4 border border-gray-300 rounded-lg">
                        <h2 class="text-xl font-semibold mb-4 text-center">Patient Group Analysis</h2>
                        <div class="text-center p-9 my-4 bg-blue-100 rounded-lg">
                            <h3 id='group1' class="text-xl font-bold"></h3>
                            <p class="text-green-600">Likelihood: <span id="confidence_level"class="font-bold"></span>%</p>
                        </div>
                        <p class="text-sm text-gray-600 italic mb-4">
                            Our automated analysis is 
                            <span id="confidence_level2"></span>% 
                            confident this patient belongs in the <span id="group2"></span> subgroup. 
                            This is taken into account for our sepsis risk analysis.
                        </p>
                        <h2 class="text-xl font-semibold mb-4 text-center">Elixhauser Comorbidity Categories</h2>
                        <ul id="comorbidity" class="list-disc pl-5">
                        </ul>
                        <!-- Disease selection dropdown -->
                        <div class="text-center mb-4">
                            <label for="disease-select" class="block mb-2 text-sm font-medium text-gray-900">Select a Disease:</label>
                            <select id="disease-select" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                                <option value="">--Please choose an option--</option>
                                <option value="congestive_heart_failure">Congestive Heart Failure</option>
                                <option value="cardiac_arrhythmias">Cardiac Arrhythmias</option>
                                <option value="valvular_disease">Valvular Disease</option>
                                <option value="pulmonary_circulation">Pulmonary Circulation Disorders</option>
                                <option value="peripheral_vascular">Peripheral Vascular Disease</option>
                                <option value="hypertension">Hypertension</option>
                                <option value="paralysis">Paralysis</option>
                                <option value="other_neurological">Other Neurological Disorders</option>
                                <option value="chronic_pulmonary">Chronic Pulmonary Disease</option>
                                <option value="diabetes_uncomplicated">Diabetes Uncomplicated</option>
                                <option value="diabetes_complicated">Diabetes Complicated</option>
                                <option value="hypothyroidism">Hypothyroidism</option>
                                <option value="renal_failure">Renal Failure</option>
                                <option value="liver_disease">Liver Disease</option>
                                <option value="peptic_ulcer">Peptic Ulcer Disease</option>
                                <option value="aids">AIDS/HIV</option>
                                <option value="lymphoma">Lymphoma</option>
                                <option value="metastatic_cancer">Metastatic Cancer</option>
                                <option value="solid_tumor">Solid Tumor without Metastasis</option>
                                <option value="rheumatoid_arthritis">Rheumatoid Arthritis</option>
                                <option value="coagulopathy">Coagulopathy</option>
                                <option value="obesity">Obesity</option>
                                <option value="weight_loss">Weight Loss</option>
                                <option value="fluid_electrolyte">Fluid and Electrolyte Disorders</option>
                                <option value="blood_loss_anemia">Blood Loss Anemia</option>
                                <option value="deficiency_anemias">Deficiency Anemias</option>
                                <option value="alcohol_abuse">Alcohol Abuse</option>
                                <option value="drug_abuse">Drug Abuse</option>
                                <option value="psychoses">Psychoses</option>
                                <option value="depression">Depression</option>
                            </select>
                        </div>
                        <!-- Disease Description Display -->
                        <div id="disease-description" class="mt-4 p-4 bg-blue-100 border border-blue-500 rounded-lg text-blue-700">
                            Select a disease to see its description.
                        </div>
                        <!-- JavaScript file for R function (02_logistic_regression.R) -->
                        <script id="subs" src="scripts/sub1_comorbidity_logistic.js"></script>
                    </div>
                    <div class="bg-white p-4 border border-gray-300 rounded-lg">
                        <h2 class="text-xl font-semibold mb-4 text-center">Sepsis Risk Alert</h2>
                        <!-- The div for displaying the risk level -->
                        <div id="risk_banner" class="text-center font-medium"></div>
                        <!-- The paragraph for next steps with a span to insert text dynamically -->
                        <p class="text-sm text-gray-600 italic"><span id="nextSteps"></span></p>
                        <!-- JavaScript file to update the content based on the model's output -->
                        <!-- <script src="scripts/flag_red.js"></script> -->
                    </div>
                </div>
            </div>
        </section>
        
    </div>
    <footer class="bg-gray-800 text-white text-center p-4">
        DSC 180B
    </footer>
    <script>

        // Function to update the text in the right half
        function updateText(subgroupName) {
            const infoContainer = document.getElementById('subgroup-info');
            infoContainer.textContent = `You clicked on ${subgroupName}`;
        }

        // Function to update the header in the right half
        function updateTitle(subgroupName) {
            const infoContainer = document.getElementById('subgroup-name');
            infoContainer.textContent = `${subgroupName}:`
        }
        // Function to parse URL parameters
        function getQueryParam(param) {
            var queryString = window.location.search.substring(1); // Get query string, excluding '?'
            var queryParams = queryString.split('&'); // Split into key-value pairs
            for (var i = 0; i < queryParams.length; i++) {
                var pair = queryParams[i].split('='); // Split key-value pair
                if (decodeURIComponent(pair[0]) == param) { // Check if the current key matches the parameter we want
                    return decodeURIComponent(pair[1]); // Return the value
                }
            }
            return null; // If the parameter isn't found, return null
        }

        // Extract userId from URL parameters
        var userId = getQueryParam('subject_id');

        // Extract color from URL parameters
        var riskColor = getQueryParam('risk_color');

        // Extract subgroup from URL parameters
        var subgroup = getQueryParam('subgroup');

        // Select the p tag by its id and set its content to the userId
        if (userId) {
            document.getElementById('subject_id_display').innerHTML = `<strong>ID:</strong> ${userId}`;
        } else {
            document.getElementById('subject_id_display').innerHTML = `<strong>ID:</strong> 0000`;
        }


        function updateNextStepsForLowRisk() {
            // Targeting the span by its ID
            const nextStepsElement = document.getElementById('nextSteps');

            // Define the instructions for low risk next steps, incorporating machine learning model details
            const lowRiskSteps = "According to our Random Forest Classifier-based machine learning algorithm, this patient has been classified as having a low (green flag) risk of developing sepsis. This classification is based on an analysis of the patient's vital signs (temperature, blood pressure, heart rate, oxygen level, respiratory rate) and existing comorbidities, along with factors such as number of readmissions, hours in the hospital per admission, and age. The predicted SOFA score range for this category is between 7 and 10, inclusive. <br><br> The patient currently appears to be stable, but continuous observation is recommended. Please ensure regular monitoring of vital signs and reassess the patient's condition periodically to detect any unforeseen changes or deterioration.";

            // Updating the innerHTML of the targeted element with the low risk steps
            nextStepsElement.innerHTML = lowRiskSteps;
        }

        function updateNextStepsForHighRisk() {
            // Targeting the span by its ID
            const nextStepsElement = document.getElementById('nextSteps');

            // Define the instructions for high risk next steps, incorporating machine learning model details
            const highRiskSteps = "According to our Random Forest Classifier-based machine learning algorithm, this patient has been classified as having a high (red flag) risk of developing sepsis. This classification is based on an analysis of the patient's vital signs (temperature, blood pressure, heart rate, oxygen level, respiratory rate) and existing comorbidities, along with factors such as number of readmissions, hours in the hospital per admission, and age. The predicted SOFA score range for this category is between 12 and 24, inclusive. <br><br> Immediate and consistent attention is required. Please initiate emergency procedures, conduct a comprehensive review of the patient's medical records, and prepare for potential intensive care intervention. This condition demands prompt action to prevent critical outcomes.";

            // Updating the innerHTML of the targeted element with the high risk steps
            nextStepsElement.innerHTML = highRiskSteps;
        }

        function updateNextStepsForMediumRisk() {
            // Targeting the span by its ID
            const nextStepsElement = document.getElementById('nextSteps');

            // Define the instructions for medium risk next steps, incorporating machine learning model details
            const mediumRiskSteps = "According to our Random Forest Classifier-based machine learning algorithm, this patient has been classified as having a medium (yellow flag) risk of developing sepsis. This classification is based on an analysis of the patient's vital signs (temperature, blood pressure, heart rate, oxygen level, respiratory rate) and existing comorbidities, along with other factors such as number of readmissions, hours in the hospital per admission, and age. The predicted SOFA score range for this category is between 4 and 6, inclusive. <br><br> Please conduct a thorough review of the patient's medical history, including comorbidity conditions and current vital sign metrics, to mitigate the risk of sepsis onset. Regular monitoring and potential intervention may be required. It is important to note that our model's accuracy ranges from 60 to 70% per subgroup, which underscores the need for clinical judgment in conjunction with the algorithm's predictions.";

            // Updating the innerHTML of the targeted element with the medium risk steps
            nextStepsElement.innerHTML = mediumRiskSteps;
        }

        function getSubgroup(number) {
            const subgroups = {
                1: "Cardiopulmonary",
                2: "Young",
                3: "Hepatic/Addiction",
                4: "Complicated Diabetes",
                5: "Uncomplicated Diabetes",
                6: "Cardiac",
                7: "Unknown"
            };

            return subgroups[number] || "Invalid Input";
        }

        // Set the background color of the body based on the risk color
        if (riskColor === 'green') {
            document.getElementById('risk_banner').innerHTML = `<div id="risk_banner" class="text-center p-4 my-4 bg-green-100 border-l-4 border-green-500 rounded-lg">
                            <h3 class="text-xl font-bold text-green-600">Green Flag - Low Risk</h3>
                            <p class="mb-4">This patient has been identified as at low risk for developing sepsis.</p>
                        </div>`;
            updateNextStepsForLowRisk();
        }
        else if (riskColor === 'yellow') {
            document.getElementById('risk_banner').innerHTML = `<div id="risk_banner" class="text-center p-4 my-4 bg-yellow-100 border-l-4 border-yellow-500 rounded-lg">
                            <h3 class="text-xl font-bold text-yellow-600">Yellow Flag - Medium Risk</h3>
                            <p class="mb-4">This patient has been identified as at Medium risk for developing sepsis.</p>
                        </div>`;
            updateNextStepsForMediumRisk();
        }
        else if (riskColor === 'red') {
            document.getElementById('risk_banner').innerHTML = `<div id="risk_banner" class="text-center p-4 my-4 bg-red-100 border-l-4 border-red-500 rounded-lg">
                            <h3 class="text-xl font-bold text-red-600">Red Flag - Severe Risk</h3>
                            <p class="mb-4">This patient has been identified as at severe risk for developing sepsis.</p>
                        </div>`;
            updateNextStepsForHighRisk();
        }
        else {
            document.getElementById('risk_banner').innerHTML = `<div id="risk_banner" class="text-center p-4 my-4 bg-blue-100 border-l-4 border-blue-500 rounded-lg">
                            <h3 class="text-xl font-bold text-blue-600">No Flag Yet</h3>
                            <p class="mb-4">This patient has yet to be identified at a risk level. Please come back soon.</p>
                        </div>`;
        }
        function fetchAndDisplayData(fileName) {
            fetch(`processed_data/id${fileName}.json`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    document.getElementById('subject_age_display').innerHTML = `<strong>Age:</strong> ${data.age}`;
                    // document.getElementById('subject_name_display').innerHTML = `<strong>Name:</strong> ${data.name}`;
                    document.getElementById('jit_time').innerHTML = `<strong>Just In Time:</strong> ${data.latest_chart_time}`;
                    document.getElementById('hr_display').innerHTML = `<strong>Heart Rate:</strong> ${data.latest_heart_rate} bpm`;
                    document.getElementById('temp_display').innerHTML = `<strong>Temperature:</strong> ${data.latest_temp_F} F`;
                    document.getElementById('rr_display').innerHTML = `<strong>Respiratory Rate:</strong> ${data.latest_respiratory_rate} bpm`;
                    document.getElementById('bp_display').innerHTML = `<strong>Blood Pressure:</strong> ${data.latest_blood_pressure} mmHg`;
                    document.getElementById('spo2_display').innerHTML = `<strong>Blood Oxygen:</strong> ${data.spo2}%`;
                    document.getElementById('sofa_display').innerHTML = `<strong>White Blood Cell Count:</strong> ${data.white_blood} cells/ÂµL`;
                    document.getElementById('confidence_level').innerHTML = data.prob;
                    document.getElementById('confidence_level2').innerHTML = data.prob;
                    document.getElementById('group1').innerHTML = getSubgroup(data.subgroup)
                    document.getElementById('group2').innerHTML = getSubgroup(data.subgroup)


                    const listElement = document.querySelector('#comorbidity');
                    listElement.innerHTML = '';  // Clear existing list items
                    data.elixhauser.forEach(category => {
                        const listItem = document.createElement('li');
                        listItem.textContent = category;
                        listItem.classList.add('mb-2');
                        listElement.appendChild(listItem);
                    });
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }


        // Fetch and display the data if the parameter is provided
        if (userId) {
            fetchAndDisplayData(userId);
        } else {
            console.log('No data file specified.');
        }

        document.addEventListener('DOMContentLoaded', function() {
            var selectElement = document.getElementById('disease-select');
            var descriptionElement = document.getElementById('disease-description');

            selectElement.addEventListener('change', function() {
                var value = this.value;
                var description = getDiseaseDescription(value);
                descriptionElement.innerHTML = description; // Change 'textContent' to 'innerHTML'
            });

            if (subgroup == 1){
                var sharedDescription = "This patient is in the Cardiopulmonary group, and the following comorbidities have been found to be highly correlated with {disease}: <ul style='margin-left: 20px;'>{comorbidities}</ul><br> The significant correlation (p <= 0.01) suggests that these conditions may share common risk factors with {disease} or could contribute to its development or severity.";

                var diseaseDescriptions = {
                    congestive_heart_failure: "Cardiac Arrhythmias, Valvular Disease, Hypertension, Chronic Pulmonary Conditions, Complicated Diabetes, Renal Failure, Coagulopathy",
                    cardiac_arrhythmias: "Congestive Heart Failure, Peripheral Vascular Disease, Hypertension, Complicated Diabetes, Renal Failure, Coagulopathy, Fluid and Electrolyte Disorders",
                    valvular_disease: "Congestive Heart Failure, Cardiac Arrhythmias",
                    pulmonary_circulation: "(No significant variables beyond the Intercept)",
                    peripheral_vascular: "Cardiac Arrhythmias, Complicated Diabetes",
                    hypertension: "Congestive Heart Failure, Complicated Diabetes, Renal Failure, Depression",
                    paralysis: "(No significant variables beyond the Intercept)",
                    other_neurological: "Complicated Diabetes, Coagulopathy, Obesity, Weight Loss, Fluid and Electrolyte Disorders, Alcohol Abuse",
                    chronic_pulmonary: "Congestive Heart Failure, Complicated Diabetes, Obesity, Depression",
                    diabetes_uncomplicated: "(No significant variables beyond the Intercept)",
                    diabetes_complicated: "Congestive Heart Failure, Cardiac Arrhythmias, Peripheral Vascular Disease, Hypertension, Other Neurological Disorders, Chronic Pulmonary, Renal Failure, AIDS/HIV, Rheumatoid Arthritis, Obesity, Psychoses",
                    hypothyroidism: "Solid Tumor without Metastasis, Psychoses, Depression",
                    renal_failure: "Congestive Heart Failure, Cardiac Arrhythmias, Hypertension, Complicated Diabetes, Obesity, Depression",
                    liver_disease: "Solid Tumor without Metastasis, Coagulopathy, Weight Loss, Alcohol Abuse",
                    peptic_ulcer: "(No significant variables beyond the Intercept)",
                    aids: "Complicated Diabetes",
                    lymphoma: "Coagulopathy",
                    metastatic_cancer: "(No significant variables beyond the Intercept)",
                    solid_tumor: "Hypothyroidism, Coagulopathy, Fluid and Electrolyte Disorders",
                    rheumatoid_arthritis: "Paralysis, Complicated Diabetes, Coagulopathy, Depression",
                    coagulopathy: "Congestive Heart Failure, Cardiac Arrhythmias, Other Neurological Disorders, Liver Disease, Lymphoma, Solid Tumor without Metastasis, Rheumatoid Arthritis, Fluid and Electrolyte Disorders, Blood Loss Anemia",
                    obesity: "Other Neurological Disorders, Chronic Pulmonary, Complicated Diabetes, Hypothyroidism, Renal Failure, Fluid and Electrolyte Disorders",
                    weight_loss: "Other Neurological Disorders, Liver Disease",
                    fluid_electrolyte: "Cardiac Arrhythmias, Other Neurological Disorders, Solid Tumor without Metastasis, Coagulopathy, Obesity, Deficiency Anemias, Depression",
                    blood_loss_anemia: "Coagulopathy",
                    deficiency_anemias: "Fluid and Electrolyte Disorders",
                    alcohol_abuse: "Other Neurological Disorders, Liver Disease, Drug Abuse",
                    drug_abuse: "Alcohol Abuse",
                    psychoses: "Complicated Diabetes",
                    depression: "Hypertension, Chronic Pulmonary, Hypothyroidism, Renal Failure, Fluid and Electrolyte Disorders"
                };
            } else if (subgroup == 2) {
                var sharedDescription = "This patient is in the Subgroup2, and the following comorbidities have been found to be highly correlated with {disease}: <ul style='margin-left: 20px;'>{comorbidities}</ul><br> The significant correlation (p <= 0.01) suggests that these conditions may share common risk factors with {disease} or could contribute to its development or severity.";

                // Map each disease to its specific comorbidities
                var diseaseDescriptions = {
                    congestive_heart_failure: "Cardiac Arrhythmias, Peripheral Vascular Disease, Hypertension, Chronic Pulmonary Conditions, Complicated Diabetes, Obesity, Other Neurological Disorders, Coagulopathy, Alcohol Abuse",
                    cardiac_arrhythmias: "Congestive Heart Failure, Valvular Disease, Hypertension, Paralysis, Uncomplicated Diabetes, Renal Failure, Obesity, Lymphoma, Metastatic Cancer",
                    valvular_disease: "Cardiac Arrhythmias, Hypertension, Chronic Pulmonary, Uncomplicated Diabetes, Complicated Diabetes, Renal Failure, Liver Disease, Solid Tumor without Metastasis, Obesity, Deficiency Anemias",
                    pulmonary_circulation: "(No significant variables beyond the Intercept)",
                    peripheral_vascular: "Congestive Heart Failure, Cardiac Arrhythmias, Hypertension, Chronic Pulmonary, Uncomplicated Diabetes, Complicated Diabetes, Renal Failure",
                    hypertension: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Peripheral Vascular Disease, Uncomplicated Diabetes, Hypothyroidism, Renal Failure, Fluid and Electrolyte Disorders, Drug Abuse, Depression",
                    paralysis: "Cardiac Arrhythmias, Peripheral Vascular Disease, Other Neurological Disorders",
                    other_neurological: "Congestive Heart Failure, Paralysis, Weight Loss, Fluid and Electrolyte Disorders, Depression",
                    chronic_pulmonary: "Congestive Heart Failure, Valvular Disease, Peripheral Vascular Disease, Uncomplicated Diabetes, Complicated Diabetes, Liver Disease, Solid Tumor without Metastasis, Obesity",
                    diabetes_uncomplicated: "Cardiac Arrhythmias, Valvular Disease, Peripheral Vascular Disease, Hypertension, Chronic Pulmonary, Renal Failure, Liver Disease, Lymphoma, Coagulopathy, Obesity",
                    diabetes_complicated: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Peripheral Vascular Disease, Chronic Pulmonary, Renal Failure",
                    hypothyroidism: "Congestive Heart Failure, Hypertension, Obesity, Depression",
                    renal_failure: "Cardiac Arrhythmias, Valvular Disease, Peripheral Vascular Disease, Hypertension, Uncomplicated Diabetes, Metastatic Cancer, Coagulopathy, Fluid and Electrolyte Disorders",
                    liver_disease: "Valvular Disease, Uncomplicated Diabetes, Solid Tumor without Metastasis, Coagulopathy, Fluid and Electrolyte Disorders, Blood Loss Anemia, Alcohol Abuse, Depression",
                    peptic_ulcer: "(No significant variables beyond the Intercept)",
                    aids: "(No significant variables)",
                    lymphoma: "Cardiac Arrhythmias, Uncomplicated Diabetes, Coagulopathy",
                    metastatic_cancer: "Cardiac Arrhythmias, Renal Failure, Blood Loss Anemia",
                    solid_tumor: "Valvular Disease, Chronic Pulmonary, Liver Disease",
                    rheumatoid_arthritis: "(No significant variables beyond the Intercept and Age)",
                    coagulopathy: "Congestive Heart Failure, Uncomplicated Diabetes, Renal Failure, Liver Disease, Lymphoma, Weight Loss, Fluid and Electrolyte Disorders",
                    obesity: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Chronic Pulmonary, Uncomplicated Diabetes, Hypothyroidism",
                    weight_loss: "Other Neurological Disorders, Coagulopathy, Fluid and Electrolyte Disorders, Blood Loss Anemia",
                    fluid_electrolyte: "Hypertension, Other Neurological Disorders, Renal Failure, Liver Disease, Coagulopathy, Weight Loss, Deficiency Anemias, Drug Abuse",
                    blood_loss_anemia: "Liver Disease, Metastatic Cancer, Weight Loss",
                    deficiency_anemias: "Valvular Disease, Fluid and Electrolyte Disorders, Depression",
                    alcohol_abuse: "Congestive Heart Failure, Liver Disease",
                    drug_abuse: "Hypertension, Fluid and Electrolyte Disorders",
                    psychoses: "(No significant variables beyond the Intercept)",
                    depression: "Hypertension, Other Neurological Disorders, Hypothyroidism, Liver Disease, Deficiency Anemias"
                };
            } else if (subgroup == 3) {
                var sharedDescription = "This patient is in the Subgroup3, and the following comorbidities have been found to be highly correlated with {disease}: <ul style='margin-left: 20px;'>{comorbidities}</ul><br> The significant correlation (p <= 0.01) suggests that these conditions may share common risk factors with {disease} or could contribute to its development or severity.";

                // Map each disease to its specific comorbidities
                var diseaseDescriptions = {
                    congestive_heart_failure: "Cardiac Arrhythmias, Valvular Disease, Pulmonary Circulation Disorders, Renal Failure, Liver Disease, Solid Tumor without Metastasis, Obesity, Fluid and Electrolyte Disorders, Metastatic Cancer, Alcohol Abuse, Depression",
                    cardiac_arrhythmias: "Congestive Heart Failure, Valvular Disease, Obesity, Fluid and Electrolyte Disorders, Weight Loss",
                    valvular_disease: "Congestive Heart Failure, Cardiac Arrhythmias, Paralysis, Weight Loss, Alcohol Abuse, Drug Abuse",
                    pulmonary_circulation: "Congestive Heart Failure, Chronic Pulmonary, Metastatic Cancer",
                    peripheral_vascular: "Weight Loss",
                    hypertension: "Other Neurological Disorders, Uncomplicated Diabetes, Complicated Diabetes, Hypothyroidism, Renal Failure, Liver Disease, Lymphoma, Metastatic Cancer, Coagulopathy, Obesity, Weight Loss, Alcohol Abuse, Depression",
                    paralysis: "Valvular Disease, Other Neurological Disorders",
                    other_neurological: "Hypertension, Paralysis, Uncomplicated Diabetes, Weight Loss, Drug Abuse",
                    chronic_pulmonary: "Pulmonary Circulation, Hypothyroidism, Metastatic Cancer, Obesity, Drug Abuse, Psychoses, Depression",
                    diabetes_uncomplicated: "Hypertension, Other Neurological Disorders, AIDS/HIV, Obesity, Weight Loss, Blood Loss Anemia, Alcohol Abuse",
                    diabetes_complicated: "Hypertension, Hypothyroidism, Weight Loss",
                    hypothyroidism: "Hypertension, Chronic Pulmonary, Complicated Diabetes, Psychoses, Depression",
                    renal_failure: "Congestive Heart Failure, Cardiac Arrhythmias, Hypertension, Liver Disease, AIDS/HIV, Metastatic Cancer, Solid Tumor without Metastasis, Weight Loss, Fluid and Electrolyte Disorders, Deficiency Anemias, Alcohol Abuse",
                    liver_disease: "Congestive Heart Failure, Hypertension, Renal Failure, AIDS/HIV, Lymphoma, Weight Loss, Fluid and Electrolyte Disorders, Alcohol Abuse, Drug Abuse, Depression",
                    peptic_ulcer: "(No significant variables beyond the Intercept)",
                    aids: "Hypertension, Uncomplicated Diabetes, Renal Failure, Liver Disease, Solid Tumor without Metastasis, Coagulopathy, Obesity, Weight Loss, Fluid and Electrolyte Disorders, Alcohol Abuse, Depression",
                    lymphoma: "Hypertension, Liver Disease, Alcohol Abuse",
                    metastatic_cancer: "Congestive Heart Failure, Pulmonary Circulation, Hypertension, Renal Failure, Fluid and Electrolyte Disorders, Alcohol Abuse.",
                    solid_tumor: "Congestive Heart Failure, Valvular Disease, Renal Failure, Deficiency Anemias, Alcohol Abuse, Depression",
                    rheumatoid_arthritis: "Alcohol Abuse",
                    coagulopathy: "Pulmonary Circulation, Hypertension, AIDS/HIV, Fluid and Electrolyte Disorders, Alcohol Abuse, Drug Abuse, Psychoses, Depression",
                    obesity: "Congestive Heart Failure, Cardiac Arrhythmias, Hypertension, Chronic Pulmonary, Uncomplicated Diabetes, AIDS/HIV, Weight Loss, Fluid and Electrolyte Disorders, Alcohol Abuse, Psychoses",
                    weight_loss: "Cardiac Arrhythmias, Peripheral Vascular Disease, Hypertension, Other Neurological Disorders, Uncomplicated Diabetes, Complicated Diabetes, Renal Failure, Liver Disease, AIDS/HIV, Obesity, Fluid and Electrolyte Disorders, Blood Loss Anemia, Deficiency Anemias",
                    fluid_electrolyte: "Congestive Heart Failure, Cardiac Arrhythmias, Renal Failure, Liver Disease, Metastatic Cancer, Coagulopathy, Obesity, Weight Loss, Alcohol Abuse, Drug Abuse",
                    blood_loss_anemia: "Weight Loss",
                    deficiency_anemias: "Renal Failure, Solid Tumor without Metastasis, Weight Loss",
                    alcohol_abuse: "Congestive Heart Failure, Valvular Disease, Hypertension, Uncomplicated Diabetes, Renal Failure, Liver Disease, AIDS/HIV, Lymphoma, Metastatic Cancer, Solid Tumor without Metastasis, Rheumatoid Arthritis, Coagulopathy, Obesity, Fluid and Electrolyte Disorders",
                    drug_abuse: "Valvular Disease, Other Neurological Disorders, Chronic Pulmonary, Liver Disease, AIDS/HIV, Coagulopathy, Fluid and Electrolyte Disorders, Depression",
                    psychoses: "Chronic Pulmonary, Hypothyroidism, Coagulopathy, Obesity",
                    depression: "Congestive Heart Failure, Hypertension, Chronic Pulmonary, Hypothyroidism, Liver Disease, Solid Tumor without Metastasis, Coagulopathy, Drug Abuse"
                };
            } else if (subgroup == 4) {
                var sharedDescription = "This patient is in the Subgroup4, and the following comorbidities have been found to be highly correlated with {disease}: <ul style='margin-left: 20px;'>{comorbidities}</ul><br> The significant correlation (p <= 0.01) suggests that these conditions may share common risk factors with {disease} or could contribute to its development or severity.";

                // Map each disease to its specific comorbidities
                var diseaseDescriptions = {
                    congestive_heart_failure: "Peripheral Vascular Disease, Chronic Pulmonary Conditions, Uncomplicated Diabetes, Hypothyroidism, Obesity, Renal Failure, Fluid and Electrolyte Disorders",
                    cardiac_arrhythmias: "Valvular Disease, Hypertension, Uncomplicated Diabetes, Hypothyroidism, Obesity, Renal Failure, Metastatic Cancer, Depression",
                    valvular_disease: "Cardiac Arrhythmias, Peripheral Vascular Disease, Hypertension, Paralysis, Other Neurological Disorders, Chronic Pulmonary, Uncomplicated Diabetes, Renal Failure, Metastatic Cancer, Psychoses",
                    pulmonary_circulation: "Hypertension",
                    peripheral_vascular: "Congestive Heart Failure, Valvular Disease, Other Neurological Disorders, Chronic Pulmonary, Metastatic Cancer, Coagulopathy",
                    hypertension: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Pulmonary Circulation, Chronic Pulmonary, Uncomplicated Diabetes, Complicated Diabetes, Hypothyroidism, Renal Failure, Metastatic Cancer, Obesity, Depression",
                    paralysis: "Valvular Disease",
                    other_neurological: "Valvular Disease, Peripheral Vascular Disease, Obesity, Fluid and Electrolyte Disorders",
                    chronic_pulmonary: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Peripheral Vascular Disease, Hypertension, Metastatic Cancer, Rheumatoid Arthritis, Coagulopathy, Obesity",
                    diabetes_uncomplicated: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Hypertension, Renal Failure, Liver Disease, Coagulopathy, Obesity, Fluid and Electrolyte Disorders, Psychoses",
                    diabetes_complicated: "Hypertension, Obesity, Fluid and Electrolyte Disorders",
                    hypothyroidism: "Congestive Heart Failure, Cardiac Arrhythmias, Hypertension, Metastatic Cancer, Solid Tumor without Metastasis, Obesity",
                    renal_failure: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Hypertension, Uncomplicated Diabetes, Depression",
                    liver_disease: "Uncomplicated Diabetes",
                    peptic_ulcer: "(No significant variables beyond the Intercept)",
                    aids: "(No significant variables)",
                    lymphoma: "(No significant variables)",
                    metastatic_cancer: "Cardiac Arrhythmias, Valvular Disease, Peripheral Vascular Disease, Hypertension, Chronic Pulmonary, Hypothyroidism, Obesity, Fluid and Electrolyte Disorders",
                    solid_tumor: "Hypothyroidism",
                    rheumatoid_arthritis: "Chronic Pulmonary",
                    coagulopathy: "Peripheral Vascular Disease, Chronic Pulmonary, Uncomplicated Diabetes, Fluid and Electrolyte Disorders",
                    obesity: "Congestive Heart Failure, Cardiac Arrhythmias, Hypertension, Other Neurological Disorders, Chronic Pulmonary, Uncomplicated Diabetes, Complicated Diabetes, Hypothyroidism, Metastatic Cancer, Fluid and Electrolyte Disorders, Deficiency Anemias, Depression",
                    weight_loss: "(No significant variables)",
                    fluid_electrolyte: "Congestive Heart Failure, Other Neurological Disorders, Uncomplicated Diabetes, Complicated Diabetes, Metastatic Cancer, Coagulopathy, Obesity",
                    blood_loss_anemia: "(No significant variables beyond the Intercept and Admission Type)",
                    deficiency_anemias: "Obesity",
                    alcohol_abuse: "(No significant variables beyond the Intercept and Admission Type)",
                    drug_abuse: "Depression",
                    psychoses: "Valvular Disease, Uncomplicated Diabetes, Depression",
                    depression: "Hypertension, Uncomplicated Diabetes, Renal Failure, Obesity, Drug Abuse"
                };
            } else if (subgroup == 5) {
                var sharedDescription = "This patient is in the Subgroup5, and the following comorbidities have been found to be highly correlated with {disease}: <ul style='margin-left: 20px;'>{comorbidities}</ul><br> The significant correlation (p <= 0.01) suggests that these conditions may share common risk factors with {disease} or could contribute to its development or severity.";

                // Map each disease to its specific comorbidities
                var diseaseDescriptions = {
                    congestive_heart_failure: "Valvular Disease, Lymphoma",
                    cardiac_arrhythmias: "Deficiency Anemias, Drug Abuse, Valvular Disease, Fluid and Electrolyte Disorders, Psychoses.",
                    valvular_disease: "Congestive Heart Failure, Cardiac Arrhythmias, Fluid and Electrolyte Disorders, Drug Abuse",
                    pulmonary_circulation: "Chronic Pulmonary, Coagulopathy, Obesity",
                    peripheral_vascular: "(No significant variables beyond the Intercept)",
                    hypertension: "Other Neurological Disorders, Liver Disease, AIDS/HIV, Fluid and Electrolyte Disorders, Alcohol Abuse, Drug Abuse",
                    paralysis: "Other Neurological Disorders, Deficiency Anemias",
                    other_neurological: "Hypertension, Paralysis, Weight Loss",
                    chronic_pulmonary: "Pulmonary Circulation Disorders, Liver Disease, Obesity, Alcohol Abuse, Drug Abuse, Depression",
                    diabetes_uncomplicated: "(No significant variables beyond the Intercept)",
                    diabetes_complicated: "Hypothyroidism, Fluid and Electrolyte Disorders, Alcohol Abuse, Drug Abuse, Depression",
                    hypothyroidism: "Complicated Diabetes, Lymphoma, Depression",
                    renal_failure: "Rheumatoid Arthritis",
                    liver_disease: "Hypertension, Chronic Pulmonary, Lymphoma, Fluid and Electrolyte Disorders, Drug Abuse",
                    peptic_ulcer: "(No significant variables beyond the Intercept)",
                    aids: "Hypertension, Lymphoma, Solid Tumor without Metastasis, Fluid and Electrolyte Disorders",
                    lymphoma: "Congestive Heart Failure, Hypothyroidism, Liver Disease, AIDS/HIV, Coagulopathy",
                    metastatic_cancer: "Alcohol Abuse, Depression",
                    solid_tumor: "AIDS/HIV",
                    rheumatoid_arthritis: "Renal Failure",
                    coagulopathy: "Pulmonary Circulation Disorders, Lymphoma, Fluid and Electrolyte Disorders, Alcohol Abuse",
                    obesity: "Pulmonary Circulation Disorders, Chronic Pulmonary, Alcohol Abuse",
                    weight_loss: "Other Neurological Disorders, Alcohol Abuse",
                    fluid_electrolyte: "Cardiac Arrhythmias, Valvular Disease, Hypertension, Complicated Diabetes, Liver Disease, AIDS/HIV, Coagulopathy, Depression",
                    blood_loss_anemia: "(No significant variables beyond the Intercept)",
                    deficiency_anemias: "Cardiac Arrhythmias, Paralysis",
                    alcohol_abuse: "Hypertension, Chronic Pulmonary, Complicated Diabetes, Metastatic Cancer, Coagulopathy, Obesity, Weight Loss, Drug Abuse, Depression",
                    drug_abuse: "Cardiac Arrhythmias, Valvular Disease, Hypertension, Chronic Pulmonary, Complicated Diabetes, Liver Disease, Alcohol Abuse, Depression",
                    psychoses: "Cardiac Arrhythmias",
                    depression: "Hypertension, Chronic Pulmonary, Complicated Diabetes, Hypothyroidism, Liver Disease, Fluid and Electrolyte Disorders, Alcohol Abuse, Drug Abuse"
                };
            } else if (subgroup == 6) {
                var sharedDescription = "This patient is in the Subgroup6, and the following comorbidities have been found to be highly correlated with {disease}: <ul style='margin-left: 20px;'>{comorbidities}</ul><br> The significant correlation (p <= 0.01) suggests that these conditions may share common risk factors with {disease} or could contribute to its development or severity.";

                // Map each disease to its specific comorbidities
                var diseaseDescriptions = {
                    congestive_heart_failure: "Cardiac Arrhythmias, Hypertension, Paralysis, Other Neurological Disorders, Renal Failure, Metastatic Cancer, Rheumatoid Arthritis, Weight Loss, Fluid and Electrolyte Disorders, Psychoses",
                    cardiac_arrhythmias: "Congestive Heart Failure, Peripheral Vascular Disease, Pulmonary Circulation Disorders, Paralysis, Other Neurological Disorders, Hypothyroidism, Renal Failure, Weight Loss, Fluid and Electrolyte Disorders, Psychoses, Alcohol Abuse, Drug Abuse",
                    valvular_disease: "Pulmonary Circulation Disorders, Paralysis, Other Neurological Disorders, Metastatic Cancer, Obesity, Weight Loss, Fluid and Electrolyte Disorders",
                    pulmonary_circulation: "Age, Cardiac Arrhythmias, Valvular Disease, Paralysis, Metastatic Cancer",
                    peripheral_vascular: "Cardiac Arrhythmias, Paralysis, Chronic Pulmonary, Fluid and Electrolyte Disorders, Depression",
                    hypertension: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Paralysis, Other Neurological Disorders, Uncomplicated Diabetes, Renal Failure, Lymphoma, Metastatic Cancer, Solid Tumor without Metastasis, Obesity, Weight Loss, Fluid and Electrolyte Disorders, Alcohol Abuse, Depression",
                    paralysis: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Pulmonary Circulation Disorders, Peripheral Vascular Disease, Hypertension, Complicated Diabetes, Liver Disease, Lymphoma, Metastatic Cancer, Solid Tumor without Metastasis, Rheumatoid Arthritis, Coagulopathy, Obesity, Fluid and Electrolyte Disorders, Psychoses",
                    other_neurological: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Peripheral Vascular Disease, Hypertension, Complicated Diabetes, Hypothyroidism, Peptic Ulcer, Lymphoma, Metastatic Cancer, Solid Tumor without Metastasis, Rheumatoid Arthritis, Coagulopathy, Obesity, Weight Loss, Fluid and Electrolyte Disorders, Blood Loss Anemia, Deficiency Anemias, Alcohol Abuse, Psychoses",
                    chronic_pulmonary: "Peripheral Vascular Disease, Renal Failure, Alcohol Abuse, Psychoses, Depression",
                    diabetes_uncomplicated: "Cardiac Arrhythmias, Hypertension, Liver Disease, Lymphoma, Metastatic Cancer, Obesity, Fluid and Electrolyte Disorders, Psychoses",
                    diabetes_complicated: "Paralysis, Other Neurological Disorders, Metastatic Cancer, Fluid and Electrolyte Disorders",
                    hypothyroidism: "Cardiac Arrhythmias, Other Neurological Disorders, Solid Tumor without Metastasis, Rheumatoid Arthritis, Obesity, Weight Loss, Fluid and Electrolyte Disorders, Blood Loss Anemia, Deficiency Anemias, Depression",
                    renal_failure: "Congestive Heart Failure, Cardiac Arrhythmias, Hypertension, Chronic Pulmonary, Rheumatoid Arthritis",
                    liver_disease: "Paralysis, Uncomplicated Diabetes, Metastatic Cancer",
                    peptic_ulcer: "Other Neurological Disorders",
                    aids: "(No significant variables)",
                    lymphoma: "Congestive Heart Failure, Hypertension, Paralysis, Other Neurological Disorders, Uncomplicated Diabetes, Metastatic Cancer, Solid Tumor without Metastasis, Coagulopathy, Weight Loss, Fluid and Electrolyte Disorders, Psychoses",
                    metastatic_cancer: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Pulmonary Circulation Disorders, Hypertension, Paralysis, Other Neurological Disorders, Uncomplicated Diabetes, Complicated Diabetes, Liver Disease, Lymphoma, Rheumatoid Arthritis, Coagulopathy, Weight Loss, Fluid and Electrolyte Disorders, Deficiency Anemias, Psychoses",
                    solid_tumor: "Valvular Disease, Hypertension, Paralysis, Other Neurological Disorders, Hypothyroidism, Lymphoma, Rheumatoid Arthritis, Fluid and Electrolyte Disorders, Deficiency Anemias, Psychoses",
                    rheumatoid_arthritis: "Congestive Heart Failure, Paralysis, Other Neurological Disorders, Hypothyroidism, Renal Failure, Metastatic Cancer, Solid Tumor without Metastasis, Fluid and Electrolyte Disorders, Psychoses",
                    coagulopathy: "Paralysis, Other Neurological Disorders, Lymphoma, Metastatic Cancer, Weight Loss, Alcohol Abuse, Depression",
                    obesity: "Valvular Disease, Hypertension, Paralysis, Other Neurological Disorders, Chronic Pulmonary, Uncomplicated Diabetes, Hypothyroidism, Rheumatoid Arthritis, Fluid and Electrolyte Disorders, Depression",
                    weight_loss: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Hypertension, Other Neurological Disorders, Hypothyroidism, Lymphoma, Coagulopathy",
                    fluid_electrolyte: "Congestive Heart Failure, Cardiac Arrhythmias, Valvular Disease, Peripheral Vascular Disease, Hypertension, Paralysis, Other Neurological Disorders, Uncomplicated Diabetes, Complicated Diabetes, Hypothyroidism, Lymphoma, Metastatic Cancer, Solid Tumor without Metastasis, Rheumatoid Arthritis, Obesity, Blood Loss Anemia, Deficiency Anemias, Psychoses, Depression",
                    blood_loss_anemia: "Other Neurological Disorders, Hypothyroidism, Obesity, Fluid and Electrolyte Disorders, Depression",
                    deficiency_anemias: "Other Neurological Disorders, Hypothyroidism, Metastatic Cancer, Solid Tumor without Metastasis, Fluid and Electrolyte Disorders, Depression",
                    alcohol_abuse: "Hypertension, Other Neurological Disorders, Chronic Pulmonary",
                    drug_abuse: "Cardiac Arrhythmias",
                    psychoses: "Congestive Heart Failure, Cardiac Arrhythmias, Paralysis, Other Neurological Disorders, Chronic Pulmonary, Uncomplicated Diabetes, Metastatic Cancer, Solid Tumor without Metastasis, Rheumatoid Arthritis, Fluid and Electrolyte Disorders",
                    depression: "Peripheral Vascular Disease, Hypertension, Chronic Pulmonary, Hypothyroidism, Coagulopathy, Obesity, Fluid and Electrolyte Disorders, Blood Loss Anemia, Deficiency Anemias"
                };
            } else if (subgroup == 7) {
                var sharedDescription = "This patient is in the Subgroup7, and the following comorbidities have been found to be highly correlated with {disease}: <ul style='margin-left: 20px;'>{comorbidities}</ul><br> The significant correlation (p <= 0.01) suggests that these conditions may share common risk factors with {disease} or could contribute to its development or severity.";

                // Map each disease to its specific comorbidities
                var diseaseDescriptions = {
                    congestive_heart_failure: "Valvular Disease, Pulmonary Circulation Disorders, Hypertension, Uncomplicated Diabetes, Complicated Diabetes, Chronic Pulmonary Conditions, Renal Failure",
                    cardiac_arrhythmias: "Valvular Disease, Hypertension, Hypothyroidism, Fluid and Electrolyte Disorders",
                    valvular_disease: "Congestive Heart Failure, Cardiac Arrhythmias, Complicated Diabetes, Metastatic Cancer, Obesity",
                    pulmonary_circulation: "Congestive Heart Failure, Chronic Pulmonary, Uncomplicated Diabetes, Complicated Diabetes, Obesity, Fluid and Electrolyte Disorders, Alcohol Abuse, Drug Abuse, Psychoses, Depression",
                    peripheral_vascular: "Complicated Diabetes, Renal Failure, Alcohol Abuse",
                    hypertension: "Congestive Heart Failure, Cardiac Arrhythmias, Uncomplicated Diabetes, Renal Failure, Depression",
                    paralysis: "Other Neurological Disorders",
                    other_neurological: "Paralysis, Weight Loss",
                    chronic_pulmonary: "Congestive Heart Failure, Pulmonary Circulation Disorders",
                    diabetes_uncomplicated: "Congestive Heart Failure, Pulmonary Circulation Disorders, Hypertension, Obesity, Alcohol Abuse, Psychoses",
                    diabetes_complicated: "Congestive Heart Failure, Valvular Disease, Pulmonary Circulation Disorders, Peripheral Vascular Disease, Renal Failure, Rheumatoid Arthritis, Obesity, Depression",
                    hypothyroidism: "Cardiac Arrhythmias, Depression",
                    renal_failure: "Congestive Heart Failure, Peripheral Vascular Disease, Hypertension, Uncomplicated Diabetes, Complicated Diabetes, Coagulopathy, Fluid and Electrolyte Disorders",
                    liver_disease: "Uncomplicated Diabetes, Peptic Ulcer, Solid Tumor without Metastasis, Coagulopathy, Obesity, Fluid and Electrolyte Disorders, Alcohol Abuse",
                    peptic_ulcer: "Peripheral Vascular Disease, Liver Disease, Fluid and Electrolyte Disorders",
                    aids: "(No significant variables)",
                    lymphoma: "(No significant variables)",
                    metastatic_cancer: "Valvular Disease",
                    solid_tumor: "Liver Disease, Weight Loss",
                    rheumatoid_arthritis: "Complicated Diabetes",
                    coagulopathy: "Renal Failure, Liver Disease, Weight Loss, Fluid and Electrolyte Disorders, Deficiency Anemias",
                    obesity: "Valvular Disease, Pulmonary Circulation Disorders, Uncomplicated Diabetes, Complicated Diabetes, Liver Disease, Alcohol Abuse",
                    weight_loss: "Other Neurological Disorders, Solid Tumor without Metastasis, Coagulopathy, Depression",
                    fluid_electrolyte: "Cardiac Arrhythmias, Pulmonary Circulation Disorders, Renal Failure, Liver Disease, Coagulopathy",
                    blood_loss_anemia: "(No significant variables beyond the Intercept and Age)",
                    deficiency_anemias: "Coagulopathy",
                    alcohol_abuse: "Congestive Heart Failure, Pulmonary Circulation Disorders, Peripheral Vascular Disease, Uncomplicated Diabetes, Liver Disease, Obesity",
                    drug_abuse: "Pulmonary Circulation Disorders, Peptic Ulcer, AIDS/HIV",
                    psychoses: "Valvular Disease, Pulmonary Circulation Disorders, Depression",
                    depression: "Pulmonary Circulation Disorders, Hypertension, Complicated Diabetes, Hypothyroidism, Psychoses"
                    
                };
            }

            function getDiseaseDescription(diseaseKey) {
                var comorbidities = diseaseDescriptions[diseaseKey];
                if (!comorbidities) {
                    return "Select a disease to see its description.";
                }
                // Convert comorbidities string to an HTML bulleted list
                var comorbiditiesList = comorbidities.split(', ').map(function(comorbidity) {
                    return '<li> - ' + comorbidity + '</li>';
                }).join('');
                // Replace placeholders with actual disease and formatted comorbidities
                return sharedDescription.replace('{disease}', diseaseKey.replace(/_/g, ' ')).replace('{comorbidities}', comorbiditiesList);
            }
            var visualSelector = document.getElementById('visualSelector');
            var visualContainer = document.getElementById('visContainer');

            var visualSelector2 = document.getElementById('visualSelector2');
            var visualContainer2 = document.getElementById('visContainer2');

            visualSelector.addEventListener('change', function() {
                if (this.value === 'visual1') {
                    visualContainer.innerHTML = `<tableau-viz id="tableauViz" src='https://public.tableau.com/views/ProcedureTimeline/Dashboard1?:language=en-US&publish=yes&:sid=&:display_count=n&:origin=viz_share_link'>
                        </tableau-viz>`;
                } else if (this.value === 'visual2') {
                    visualContainer.innerHTML = `<tableau-viz id="tableauViz" src='https://public.tableau.com/views/SepsisDashboardPatientVitals/Dashboard1?:language=en-US&publish=yes&:sid=&:display_count=n&:origin=viz_share_link'>
                        </tableau-viz>`;
                }
                else if (this.value === 'visual5') {
                    visualContainer.innerHTML = `<tableau-viz id="tableauViz" src='https://public.tableau.com/views/WBCVitals/Sheet1?:language=en-US&publish=yes&:sid=&:display_count=n&:origin=viz_share_link'>
                        </tableau-viz>`;
                }
            });

            visualSelector2.addEventListener('change', function() {
                if (this.value === 'visual3') {
                    visualContainer2.innerHTML = `<tableau-viz id="tableauViz" src='https://public.tableau.com/views/SepsisDashboardTableauWork/Dashboard1?:language=en-US&publish=yes&:sid=&:display_count=n&:origin=viz_share_link'>
                        </tableau-viz>`;
                }
                else if (this.value === 'visual4') {
                    visualContainer2.innerHTML = `<tableau-viz id="tableauViz" src='https://public.tableau.com/views/SubgroupComposition/Dashboard1?:language=en-US&publish=yes&:sid=&:display_count=n&:origin=viz_share_link'>
                        </tableau-viz>`;
                }
            });
        });



        // // Function to draw Visual 1
        // function drawVisual1() {
        //     const svg = d3.select('#d3VisualContainer').append('svg')
        //         .attr('width', 200)
        //         .attr('height', 200);

        //     svg.append('circle')
        //         .attr('cx', 100)
        //         .attr('cy', 100)
        //         .attr('r', 50)
        //         .attr('fill', 'red');
        // }

        // // Function to draw Visual 2
        // function drawVisual2() {
        //     const svg = d3.select('#d3VisualContainer').append('svg')
        //         .attr('width', 200)
        //         .attr('height', 200);

        //     svg.append('rect')
        //         .attr('x', 50)
        //         .attr('y', 50)
        //         .attr('width', 100)
        //         .attr('height', 100)
        //         .attr('fill', 'blue');
        // }

        // // Function to update the visual based on the dropdown selection
        // function updateVisual(selectedVisual) {
        //     // Clear the previous visual
        //     d3.select('#d3VisualContainer').selectAll('*').remove();

        //     // Draw the selected visual
        //     if (selectedVisual === 'visual1') {
        //         drawVisual1();
        //     } else if (selectedVisual === 'visual2') {
        //         drawVisual2();
        //     }
        //     // Add more conditions for additional visuals
        // }

        // // Event listener for the dropdown
        // document.getElementById('visualSelector').addEventListener('change', function() {
        //     updateVisual(this.value);
        // });

        // // Initial visual setup
        // updateVisual('visual1'); // Default to showing the first visual

    </script>
</body>
</html>